## Train Release definition
## -- The train engines are fixed tagged releases which should explicity reference the digest of an image you want to include
## -- This ensures that the appropriate image is always tagged for a release
[engine:hamlet_train_release]
    description = The engine definition for the train release
    sources = train_engine
              train_bash
              train_core
              train_plugin_aws
              train_plugin_azure

    parts   = train_engine
              train_bash
              train_core
              train_plugin_aws
              train_plugin_azure

[engine_source:train_engine]
    type = container
    container_registry_url = https://ghcr.io
    container_repository = hamlet-io/engine
    container_tag = sha256:63d6c9cb0e57e4ba6e7a8e117358c8398bd7b2b06bfaf88c70158807575308d3

[engine_source:train_bash]
    type = container
    container_registry_url = https://ghcr.io
    container_repository = hamlet-io/executor-bash
    container_tag = sha256:4ebb4bddaca00b9b41ee04a492a96fa30c14f1776f683198c5129171d85ec064

[engine_source:train_core]
    type = container
    container_registry_url = https://ghcr.io
    container_repository = hamlet-io/engine-core
    container_tag = sha256:18aeb47ee60ec7dd824dac38a32fe9ecc3fae340ca65f417f469827e735091ad

[engine_source:train_plugin_azure]
    type = container
    container_registry_url = https://ghcr.io
    container_repository = hamlet-io/engine-plugin-azure
    container_tag = sha256:c1ff8967d052f42b1890fd23702d310fd487c4e3a321aba12b8b206cd37aae33

[engine_source:train_plugin_aws]
    type = container
    container_registry_url = https://ghcr.io
    container_repository = hamlet-io/engine-plugin-aws
    container_tag = sha256:4a105398d98874999f23b5352a4f62fe62d2b37e2849604b3b6061a845d237d5

[engine_part:train_engine]
    type = engine
    source_name = train_engine

[engine_part:train_bash]
    type = executor-bash
    source_name = train_bash

[engine_part:train_core]
    type = bundled-wrapper
    source_path = image
    source_name = train_core

[engine_part:train_plugin_aws]
    type = engine-plugin-aws
    source_name = train_plugin_aws

[engine_part:train_plugin_azure]
    type = engine-plugin-azure
    source_name = train_plugin_azure


## Tram Release definition
## -- The tram release is a schedule combined build and test of the edge containers for each engine component
[engine:hamlet_tram_release]
    description = The engine definition for the tram release
    sources = tram_engine
              tram_bash
              tram_core
              tram_plugin_aws
              tram_plugin_azure

    parts   = tram_engine
              tram_bash
              tram_core
              tram_plugin_aws
              tram_plugin_azure

[engine_source:tram_engine]
    type = container
    container_registry_url = https://ghcr.io
    container_repository = hamlet-io/engine
    container_tag = edge

[engine_source:tram_bash]
    type = container
    container_registry_url = https://ghcr.io
    container_repository = hamlet-io/executor-bash
    container_tag = edge

[engine_source:tram_core]
    type = container
    container_registry_url = https://ghcr.io
    container_repository = hamlet-io/engine-core
    container_tag = edge

[engine_source:tram_plugin_aws]
    type = container
    container_registry_url = https://ghcr.io
    container_repository = hamlet-io/engine-plugin-aws
    container_tag = edge

[engine_source:tram_plugin_azure]
    type = container
    container_registry_url = https://ghcr.io
    container_repository = hamlet-io/engine-plugin-azure
    container_tag = edge

[engine_part:tram_engine]
    type = engine
    source_name = tram_engine

[engine_part:tram_bash]
    type = executor-bash
    source_name = tram_bash

[engine_part:tram_core]
    type = bundled-wrapper
    source_path = image
    source_name = tram_core

[engine_part:tram_plugin_aws]
    type = engine-plugin-aws
    source_name = tram_plugin_aws

[engine_part:tram_plugin_azure]
    type = engine-plugin-azure
    source_name = tram_plugin_azure
