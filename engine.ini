## Train Release definition
## -- The train engines are fixed tagged releases which should explicity reference the digest of an image you want to include
## -- This ensures that the appropriate image is always tagged for a release
[engine:hamlet_train_release]
    description = The engine definition for the train release
    sources = train_engine
              train_bash
              train_core
              train_plugin_aws
              train_plugin_azure

    parts   = train_engine
              train_bash
              train_core
              train_plugin_aws
              train_plugin_azure

[engine_source:train_engine]
    type = container
    container_registry_url = https://ghcr.io
    container_repository = hamlet-io/engine
    container_tag = sha256:c40dbeb8e00fa0a42027e26a32faf7f68c095489917095da4065d01c63b71050

[engine_source:train_bash]
    type = container
    container_registry_url = https://ghcr.io
    container_repository = hamlet-io/executor-bash
    container_tag = sha256:8965096a765d81222b43e6e556705803c4421558fbb651089b33bbe8b5d07696

[engine_source:train_core]
    type = container
    container_registry_url = https://ghcr.io
    container_repository = hamlet-io/engine-core
    container_tag = sha256:5437d4032fe365c1f6f071334519a84e7eef5732696c6441bbf6d8837387c846

[engine_source:train_plugin_azure]
    type = container
    container_registry_url = https://ghcr.io
    container_repository = hamlet-io/engine-plugin-azure
    container_tag = sha256:ff81d2790c18f660a832ea9b421fa11314131b33e90141313fd837e493cb923a

[engine_source:train_plugin_aws]
    type = container
    container_registry_url = https://ghcr.io
    container_repository = hamlet-io/engine-plugin-aws
    container_tag = sha256:98ba5ba31e53165073e019c307fbbec55b2ad4d840d25906397432ef703440fd

[engine_part:train_engine]
    type = engine
    source_name = train_engine

[engine_part:train_bash]
    type = executor-bash
    source_name = train_bash

[engine_part:train_core]
    type = bundled-wrapper
    source_path = image
    source_name = train_core

[engine_part:train_plugin_aws]
    type = engine-plugin-aws
    source_name = train_plugin_aws

[engine_part:train_plugin_azure]
    type = engine-plugin-azure
    source_name = train_plugin_azure


## Tram Release definition
## -- The tram release is a schedule combined build and test of the edge containers for each engine component
[engine:hamlet_tram_release]
    description = The engine definition for the tram release
    sources = tram_engine
              tram_bash
              tram_core
              tram_plugin_aws
              tram_plugin_azure

    parts   = tram_engine
              tram_bash
              tram_core
              tram_plugin_aws
              tram_plugin_azure

[engine_source:tram_engine]
    type = container
    container_registry_url = https://ghcr.io
    container_repository = hamlet-io/engine
    container_tag = edge

[engine_source:tram_bash]
    type = container
    container_registry_url = https://ghcr.io
    container_repository = hamlet-io/executor-bash
    container_tag = edge

[engine_source:tram_core]
    type = container
    container_registry_url = https://ghcr.io
    container_repository = hamlet-io/engine-core
    container_tag = edge

[engine_source:tram_plugin_aws]
    type = container
    container_registry_url = https://ghcr.io
    container_repository = hamlet-io/engine-plugin-aws
    container_tag = edge

[engine_source:tram_plugin_azure]
    type = container
    container_registry_url = https://ghcr.io
    container_repository = hamlet-io/engine-plugin-azure
    container_tag = edge

[engine_part:tram_engine]
    type = engine
    source_name = tram_engine

[engine_part:tram_bash]
    type = executor-bash
    source_name = tram_bash

[engine_part:tram_core]
    type = bundled-wrapper
    source_path = image
    source_name = tram_core

[engine_part:tram_plugin_aws]
    type = engine-plugin-aws
    source_name = tram_plugin_aws

[engine_part:tram_plugin_azure]
    type = engine-plugin-azure
    source_name = tram_plugin_azure
