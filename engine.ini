## Train Release definition
## -- The train engines are fixed tagged releases which should explicity reference the digest of an image you want to include
## -- This ensures that the appropriate image is always tagged for a release
[engine:hamlet_train_release]
    description = The engine definition for the train release
    sources = train_engine
              train_bash
              train_core
              train_plugin_aws
              train_plugin_azure

    parts   = train_engine
              train_bash
              train_core
              train_plugin_aws
              train_plugin_azure

[engine_source:train_engine]
    type = container
    container_registry_url = https://ghcr.io
    container_repository = hamlet-io/engine
    container_tag = sha256:e47a424570945e08c4aec71093a6ef75f7681d6a38e4e78c742fbeb2185048ec

[engine_source:train_bash]
    type = container
    container_registry_url = https://ghcr.io
    container_repository = hamlet-io/executor-bash
    container_tag = sha256:141080a077da2b2af5fd1949755d4090593b6545a520c86373447d130b2c9d33

[engine_source:train_core]
    type = container
    container_registry_url = https://ghcr.io
    container_repository = hamlet-io/engine-core
    container_tag = sha256:5437d4032fe365c1f6f071334519a84e7eef5732696c6441bbf6d8837387c846

[engine_source:train_plugin_azure]
    type = container
    container_registry_url = https://ghcr.io
    container_repository = hamlet-io/engine-plugin-azure
    container_tag = sha256:a5d815011473ad0bf89c072d6b9f2afb4e1838cd459264670426894dc8d82bdb

[engine_source:train_plugin_aws]
    type = container
    container_registry_url = https://ghcr.io
    container_repository = hamlet-io/engine-plugin-aws
    container_tag = sha256:045091a2abeffd3d6659fbbb6fb7d92fdfc1a80713f710344985aa34931cee41

[engine_part:train_engine]
    type = engine
    source_name = train_engine

[engine_part:train_bash]
    type = executor-bash
    source_name = train_bash

[engine_part:train_core]
    type = bundled-wrapper
    source_path = image
    source_name = train_core

[engine_part:train_plugin_aws]
    type = engine-plugin-aws
    source_name = train_plugin_aws

[engine_part:train_plugin_azure]
    type = engine-plugin-azure
    source_name = train_plugin_azure


## Tram Release definition
## -- The tram release is a schedule combined build and test of the edge containers for each engine component
[engine:hamlet_tram_release]
    description = The engine definition for the tram release
    sources = tram_engine
              tram_bash
              tram_core
              tram_plugin_aws
              tram_plugin_azure

    parts   = tram_engine
              tram_bash
              tram_core
              tram_plugin_aws
              tram_plugin_azure

[engine_source:tram_engine]
    type = container
    container_registry_url = https://ghcr.io
    container_repository = hamlet-io/engine
    container_tag = edge

[engine_source:tram_bash]
    type = container
    container_registry_url = https://ghcr.io
    container_repository = hamlet-io/executor-bash
    container_tag = edge

[engine_source:tram_core]
    type = container
    container_registry_url = https://ghcr.io
    container_repository = hamlet-io/engine-core
    container_tag = edge

[engine_source:tram_plugin_aws]
    type = container
    container_registry_url = https://ghcr.io
    container_repository = hamlet-io/engine-plugin-aws
    container_tag = edge

[engine_source:tram_plugin_azure]
    type = container
    container_registry_url = https://ghcr.io
    container_repository = hamlet-io/engine-plugin-azure
    container_tag = edge

[engine_part:tram_engine]
    type = engine
    source_name = tram_engine

[engine_part:tram_bash]
    type = executor-bash
    source_name = tram_bash

[engine_part:tram_core]
    type = bundled-wrapper
    source_path = image
    source_name = tram_core

[engine_part:tram_plugin_aws]
    type = engine-plugin-aws
    source_name = tram_plugin_aws

[engine_part:tram_plugin_azure]
    type = engine-plugin-azure
    source_name = tram_plugin_azure
